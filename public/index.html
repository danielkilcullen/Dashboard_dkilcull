<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>Project Dashboard</title>
  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
  <link href="css/styles.css" rel="stylesheet" type="text/css"/>

</head>
<div class="container-fluid" id="dashboard">

  <div class="text-center container-fluid heading">
    <h1>{{ project.name }}</h1>
    <p>{{ project.short_description }}</p>
  </div>

  <div class="container">

  <div class="row">

      <div class="col-4 placeholder">
        Completion %
      </div>

      <div class="col-4 placeholder" id="target">
        <div class="row">
          <div class="col-6">
            <p class="h4 text-center">Target Date</p>
            <div class="ban">{{ pretty_Date(project.target_date) }}</div>
          </div>
          <div class="col-6">
            <p class="h4 text-center">Remaining</p>
            <div class="ban"><p class="values">{{ days_left }} days</p></div>
          </div>
        </div>
      </div>

      <div class="col-4 placeholder">
        Status
      </div>

  </div>

  <div class="row" style="height: 300px">

      <div class="col-4" id="budget">
        <div class="row text-center">
          <h5 class="col-12">Spent</h5>
          <p class="col-12">{{pretty_Currency(project.spent)}}</p>
        </div>
        <div class="row text-center">
          <h5 class="col-12">Budget</h5>
          <p class="col-12">{{pretty_Currency(project.budget)}}</p>
        </div>
        <div class="row text-center">
          <h5 class="col-12">Projected Spend</h5>
          <p class="col-12">{{projected_spend(project.projected_spend)}}</p>
        </div>
      </div>

      <div class="col-4 placeholder">
        Burndown chart goes here
      </div>

      <div class="col-4 placeholder">
        Effort chart goes here
      </div>

  </div>

  </div>

  <div class="row-fluid">

    <!--table scripts -->
    <script src="tablesort.min.js"></script>
    <!-- Include sort types you need -->
    <script src="tablesort.number.js"></script>
    <script src="tablesort.date.js"></script>
    <script>
      new Tablesort(document.getElementById('tasks'));
    </script>

    <table class="table table-sm table-striped table-bordered" id="taskTable">
      <thead>
        <tr>
          <th>Task</th>
          <th>Type</th>
          <th>Size</th>
          <th>Team</th>
          <th>Status</th>
          <th>Start Date</th>
          <th>Hours Worked</th>
          <th>% Complete</th>
        </tr>
      </thead>
      <tbody>
        <tr v-for="task in tasks"
          :key="task.id"
          :id="'task-' + task.id"
          :class="task.current_sprint ? 'current_sprint' : ''"
          @click="gotoTask(task.id)">
          <td>{{ task.title }}</td>
          <td>{{ task.type }}</td>
          <td>{{ task.size }}</td>
          <td>{{ task.team }}</td>
          <td>{{ task.status }}</td>
          <td>{{ task.start_date }}</td>
          <td>{{ task.hours_worked }}</td>
          <td :class="completeClass(task)">{{ task.perc_complete}}</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<script src="js/dashboardApp.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="js/tablesort.min.js"></script>
<script>
  //Tablesort plugin from http://tristen.ca/tablesort/ //
  new Tablesort(document.getElementById('taskTable'));
  Tablesort.extend('tshirt',function(item) {
    //regex to test against
    return /^X?S|M|X?L|2XL$/.test(item);
  },function(a,b) {
    //custom sort functionality goes here
    //e.g., var n = (a > b) ? -1:1;
    var sizes = ['XS','S','M','L','XL','2XL'];
    return sizes.indexOf(b) - sizes.indexOf(a);
  });
</script>

</html>
